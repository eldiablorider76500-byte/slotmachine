<script>
  /*‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    CONFIG DES SYMBOLS
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ*/
  const IMAGE_BASE_PATH = "";

  const SYMBOLS = [
    { id:"cygne",        file:"IMG-20251120-WA0017.jpg", label:"Cygne royal",        isBig:false },
    { id:"loup",         file:"IMG-20251120-WA0018.jpg", label:"Loup",               isBig:true,  bigType:"giga" },
    { id:"rosejamais",   file:"IMG-20251120-WA0019.jpg", label:"Rose √† jamais",      isBig:false },
    { id:"casquette",    file:"IMG-20251120-WA0020.jpg", label:"Casquette",          isBig:false },
    { id:"manette",      file:"IMG-20251120-WA0021.jpg", label:"Manette",            isBig:false },
    { id:"confetti",     file:"IMG-20251120-WA0022.jpg", label:"Confetti",           isBig:false },
    { id:"amourlangage", file:"IMG-20251120-WA0023.jpg", label:"Amour en langage",   isBig:false },
    { id:"donuts",       file:"IMG-20251120-WA0024.jpg", label:"Donut",              isBig:false },
    { id:"glace",        file:"IMG-20251120-WA0025.jpg", label:"Cornet glac√©",       isBig:false },
    { id:"parfum",       file:"IMG-20251120-WA0026.jpg", label:"Parfum",             isBig:false },
    { id:"corgi",        file:"IMG-20251120-WA0027.jpg", label:"Corgi",              isBig:false },
    { id:"gants",        file:"IMG-20251120-WA0028.jpg", label:"Gants de boxe",      isBig:false },
    { id:"rosa",         file:"IMG-20251120-WA0029.jpg", label:"Rosa",               isBig:false },
    { id:"gg",           file:"IMG-20251120-WA0030.jpg", label:"GG",                 isBig:false },
    { id:"positivite",   file:"IMG-20251120-WA0031.jpg", label:"De la positivit√©",   isBig:false },
    { id:"tofu",         file:"IMG-20251120-WA0032.jpg", label:"Tofu",               isBig:false },
    { id:"coeurdoigts",  file:"IMG-20251120-WA0033.jpg", label:"C≈ìur avec les doigts", isBig:false },
    { id:"coeurnuage",   file:"IMG-20251120-WA0034.jpg", label:"C≈ìur nuage",         isBig:false },
    { id:"moto",         file:"IMG-20251120-WA0035.jpg", label:"Moto",               isBig:true,  bigType:"mega" },
    { id:"pistolet",     file:"IMG-20251120-WA0042.jpg", label:"Pistolet √† argent",  isBig:false }
  ];

  const NON_BIG_SYMBOLS = SYMBOLS.filter(s => !s.isBig);

  /*‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    LISTES DES R√àGLES
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ*/

  // Petits lots 15‚Äì20 tours
  const SMALL_REWARD_IDS = [
    "donuts","rosa","manette","confetti",
    "parfum","tofu","glace","casquette"
  ];

  // Lots tous les 70 tours
  const MEDIUM_REWARD_IDS = [
    "rosejamais","pistolet","corgi","casquette",
    "positivite","confetti","amourlangage","rosa","parfum"
  ];

  // Cycle sp√©cial des tours 260+ (apr√®s 200)
  const BIG_260_SEQUENCE = [
    "cygne","pistolet","moto","loup",
    "pistolet","cygne","moto","pistolet","loup",
    "cygne","moto","cygne","pistolet","moto","loup"
  ];
  let big260Index = 0;

  /*‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    √âTAT GLOBAL
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ*/
  let currentPlayerName = "";
  let currentGiftCoins  = 0;
  let spinsLeft         = 0;

  let isSpinning        = false;
  let totalSpins        = 0;

  // Moto obligatoire une seule fois au 1er tour 200
  let moto200Given      = false;

  // Prochain petit lot (entre 15 et 20)
  let nextSmallRewardAt = getRandomInt(15, 20);

  // Pour savoir d‚Äôo√π vient le lot (200, 260, 70, small, normal)
  let lastRewardSource  = null;

  /*‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    SELECTEURS DOM
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ*/
  const reels            = Array.from(document.querySelectorAll(".reel"));
  const winBanner        = document.getElementById("winBanner");
  const winTypeLabel     = document.getElementById("winTypeLabel");
  const winSymbolLabel   = document.getElementById("winSymbolLabel");

  const playerNameDisplay = document.getElementById("playerNameDisplay");
  const giftCoinsDisplay  = document.getElementById("giftCoinsDisplay");
  const spinsLeftDisplay  = document.getElementById("spinsLeftDisplay");
  const totalSpinsDisplay = document.getElementById("totalSpinsDisplay");
  const sinceBigDisplay   = document.getElementById("sinceBigDisplay");

  const setGiftBtn       = document.getElementById("setGiftBtn");
  const spinBtn          = document.getElementById("spinBtn");

  const fxFireworks      = document.getElementById("fx-fireworks");
  const fxConfetti       = document.getElementById("fx-confetti");

  /*‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    UTILS
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ*/
  function getSymbolById(id){
    return SYMBOLS.find(s => s.id === id);
  }

  function randomSymbol(pool = SYMBOLS){
    return pool[Math.floor(Math.random() * pool.length)];
  }

  function randomNonBigSymbol(){
    return randomSymbol(NON_BIG_SYMBOLS);
  }

  function getRandomInt(min, max){
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function calcSpinsFromCoins(coins){
    if (coins >= 2999) return 70;
    if (coins >= 299)  return 7;
    if (coins >= 99)   return 3;
    if (coins >= 49)   return 1;
    return 0;
  }

  function updateStatusDisplays(){
    playerNameDisplay.textContent = currentPlayerName || "-";
    giftCoinsDisplay.textContent  = currentGiftCoins.toString();
    spinsLeftDisplay.textContent  = spinsLeft.toString();
    totalSpinsDisplay.textContent = totalSpins.toString();
    sinceBigDisplay.textContent   = "0"; // pas utilis√©, on le laisse √† 0
  }

  /*‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    BANDEAU + FX
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ*/
  function showWinBanner(type, symbol){
    let cls   = "";
    let label = "";

    if (type === "giga") {
      cls = "giga";
      label = "GIGA WIN";
    } else if (type === "mega") {
      cls = "mega";
      label = "MEGA WIN";
    } else if (type === "big") {
      cls = "big";
      label = "BIG WIN";
    } else {
      winBanner.style.display = "none";
      return;
    }

    winBanner.classList.remove("big","mega","giga");
    winBanner.classList.add(cls);
    winTypeLabel.textContent   = `${label} pour ${currentPlayerName || "-"}`;
    winSymbolLabel.textContent = `4√ó ${symbol.label}`;
    winBanner.style.display    = "flex";

    // Reset FX
    fxFireworks.classList.add("hidden");
    fxConfetti.classList.add("hidden");

    // Par d√©faut : loup -> feu d'artifice, moto -> confettis
    if (type === "giga") {
      fxFireworks.classList.remove("hidden");
    } else if (type === "mega") {
      fxConfetti.classList.remove("hidden");
    }

    // Masque apr√®s 4 secondes
    setTimeout(() => {
      hideWinBanner();
    }, 4000);
  }

  function hideWinBanner(){
    winBanner.style.display = "none";
    fxFireworks.classList.add("hidden");
    fxConfetti.classList.add("hidden");
  }

  /*‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    INIT DES REELS
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ*/
  function initReels(){
    reels.forEach(reel => {
      const img = reel.querySelector("img");
      const sym = randomSymbol();
      img.src   = IMAGE_BASE_PATH + sym.file;
      img.alt   = sym.label;
      reel.dataset.symbolId = sym.id;
    });
  }

  initReels();
  updateStatusDisplays();

  /*‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    LOGIQUE PRINCIPALE DES R√âCOMPENSES
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ*/
  function computeFinalSymbols(){
    totalSpins++;
    const spinIndex = totalSpins;

    let forcedSymbolId = null;
    lastRewardSource   = null; // reset

    // 1Ô∏è‚É£ Premi√®re fois qu‚Äôon atteint 200 tours ‚Üí moto garantie
    if (!moto200Given && spinIndex === 200) {
      forcedSymbolId = "moto";
      moto200Given   = true;
      lastRewardSource = "200";
    }

    // 2Ô∏è‚É£ Apr√®s 200, tous les 260 tours ‚Üí gros cycle sp√©cial
    else if (spinIndex > 200 && spinIndex % 260 === 0) {
      forcedSymbolId   = BIG_260_SEQUENCE[big260Index];
      big260Index      = (big260Index + 1) % BIG_260_SEQUENCE.length;
      lastRewardSource = "260";
    }

    // 3Ô∏è‚É£ Tous les 70 tours ‚Üí lot moyen
    else if (spinIndex % 70 === 0) {
      forcedSymbolId   = MEDIUM_REWARD_IDS[Math.floor(Math.random() * MEDIUM_REWARD_IDS.length)];
      lastRewardSource = "70";
    }

    // 4Ô∏è‚É£ Tous les 15‚Äì20 tours ‚Üí petit lot
    else if (spinIndex === nextSmallRewardAt) {
      forcedSymbolId   = SMALL_REWARD_IDS[Math.floor(Math.random() * SMALL_REWARD_IDS.length)];
      nextSmallRewardAt = spinIndex + getRandomInt(15, 20);
      lastRewardSource = "small";
    }

    const finalSymbols = [];

    if (forcedSymbolId) {
      const sym = getSymbolById(forcedSymbolId);
      for (let i = 0; i < 4; i++) finalSymbols.push(sym);
    } else {
      for (let i = 0; i < 4; i++) finalSymbols.push(randomNonBigSymbol());
    }

    return finalSymbols;
  }

  /*‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    VALIDATION DU CADEAU
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ*/
  setGiftBtn.addEventListener("click", () => {
    const nameInput  = document.getElementById("playerName");
    const coinsInput = document.getElementById("giftCoins");

    const name  = nameInput.value.trim();
    const coins = parseInt(coinsInput.value, 10);

    if (!name) {
      alert("Merci d'entrer le pseudo TikTok du joueur.");
      return;
    }

    if (isNaN(coins) || coins <= 0) {
      alert("Merci d'entrer le nombre de pi√®ces du cadeau.");
      return;
    }

    const spins = calcSpinsFromCoins(coins);
    if (spins === 0) {
      alert("Minimum 49 pi√®ces pour jouer.");
      return;
    }

    currentPlayerName = name;
    currentGiftCoins  = coins;
    spinsLeft        += spins;

    updateStatusDisplays();
    spinBtn.disabled = false;
  });

  /*‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    LANCEMENT DU SPIN
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ*/
  spinBtn.addEventListener("click", () => {
    if (isSpinning) return;
    if (spinsLeft <= 0) {
      alert("Plus de tours pour ce joueur. Nouveau cadeau (min 49 pi√®ces) n√©cessaire.");
      spinBtn.disabled = true;
      return;
    }

    spinsLeft--;
    const finalSymbols = computeFinalSymbols();
    updateStatusDisplays();
    startSpin(finalSymbols);
  });

  function startSpin(finalSymbols){
    isSpinning = true;
    hideWinBanner();

    const reelDurations = [1600, 2000, 2400, 2800];
    let reelsStopped    = 0;
    const finalIds      = new Array(4);

    reels.forEach((reel, index) => {
      reel.classList.add("spinning");
      const img = reel.querySelector("img");

      const shuffleInterval = setInterval(() => {
        const sym = randomSymbol();
        img.src = IMAGE_BASE_PATH + sym.file;
        img.alt = sym.label;
      }, 80);

      setTimeout(() => {
        clearInterval(shuffleInterval);

        const finalSym = finalSymbols[index];
        finalIds[index] = finalSym.id;

        img.src = IMAGE_BASE_PATH + finalSym.file;
        img.alt = finalSym.label;
        reel.dataset.symbolId = finalSym.id;
        reel.classList.remove("spinning");

        reelsStopped++;

        if (reelsStopped === reels.length) {
          applyPrizeRules(finalSymbols, finalIds);
          isSpinning = false;
          updateStatusDisplays();

          if (spinsLeft <= 0) {
            spinBtn.disabled = true;
          }
        }
      }, reelDurations[index]);
    });
  }

  /*‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    APPLICATION DES GAINS
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ*/
  function applyPrizeRules(finalSymbols, finalIds){
    const allSame = finalIds.every(id => id === finalIds[0]);
    if (!allSame) {
      hideWinBanner();
      return;
    }

    const winningSymbol = finalSymbols[0];

    // Type du gain pour le bandeau
    if (winningSymbol.isBig) {
      if (winningSymbol.id === "loup") {
        showWinBanner("giga", winningSymbol);
      } else if (winningSymbol.id === "moto") {
        showWinBanner("mega", winningSymbol);
      } else {
        showWinBanner("big", winningSymbol);
      }
    } else {
      showWinBanner("big", winningSymbol);
    }

    // üí• EFFET SP√âCIAL POUR LES LOTS DES TOURS 260
    if (lastRewardSource === "260") {
      // On force feu d'artifice + confettis en m√™me temps
      fxFireworks.classList.remove("hidden");
      fxConfetti.classList.remove("hidden");
    }
  }
</script>
